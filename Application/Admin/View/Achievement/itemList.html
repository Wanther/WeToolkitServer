<extend name="Public/base"/>

<block name="script">
<script type="text/javascript">
	$(function(){
		$('.json-data').each(function(i, el) {
			var json = $.parseJSON($(el).text());
			var html = '';
			for (var i = 0, size = json.length; i < size; i++) {
				if (i > 0) {html += "|";}
				html += '<span>' + json[i].name + '</span>=';
				html += '<span>' + json[i].value + '</span>';
			}
			$(el).html(html);
		});
	});
</script>
</block>

<block name="content">

	<a href="#importDialog" role="button" class="btn" data-toggle="modal">导入</a>

	<table class="table table-hover table-bordered table-condensed">
		<thead>
			<tr>
				<th>姓名</th>
				<th>手机号</th>
				<th>邮箱</th>
				<th>其他字段</th>
			</tr>
		</thead>

		<tbody>
			<volist name="dataList" id="data">
			<tr>
				<td>{$data.name}</td>
				<td>{$data.phone}</td>
				<td>{$data.email}</td>
				<td class="json-data">{$data.detail}</td>
			</tr>
			</volist> 
		</tbody>
	</table>

	<div class="pagination">
		{$page}
	</div>

	<div id="importDialog" class="modal hide fade">
		<div class="modal-header">
		<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
		<h3>导入</h3>
		</div>
		<form action="{:U('Achievement/itemImport')}" method="post" enctype="multipart/form-data">
			<div class="modal-body">
				<input type="hidden" name="pid" value="{$parent.id}"/>
				<input type="file" name="achievement_detail"/>
			</div>
			<div class="modal-footer">
				<input type="submit" class="btn" value="导入" />
			</div>
		</form>
	</div>
	
</block>